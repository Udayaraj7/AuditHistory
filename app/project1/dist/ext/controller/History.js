sap.ui.define(["sap/m/Dialog","sap/m/Table","sap/m/Column","sap/m/ColumnListItem","sap/m/Text","sap/m/Button"],function(e,t,n,o,r,a){"use strict";let s,d,u;return{onHistoryClick:function(i,c){debugger;const l=i;if(!l)return;const m=l.getProperty("customerId");var w=[];$.ajax({url:"/odata/v4/myservice/AuditHistoryCustomer?$filter=customerId eq '"+m+"'",type:"GET",contentType:"application/json",success:function(e){w=e.value;w.sort(function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)});if(d){d.destroyItems()}w.forEach(e=>{const t=new Date(e.createdAt);const n=t.getDate().toString().padStart(2,"0");const o=t.toLocaleString("default",{month:"short"});const r=t.getFullYear();const a=t.getHours().toString().padStart(2,"0");const s=t.getMinutes().toString().padStart(2,"0");e.createdAtFormatted=`${n}-${o}-${r} ${a}:${s}`});var t=new sap.ui.model.json.JSONModel({records:w});d.setModel(t);d.bindItems({path:"/records",template:u})},error:function(e,t,n){console.error("Error fetching customer:",t,n)}});if(!s){s=new e({title:"Customer Audit History",contentWidth:"70%",resizable:true,draggable:true,endButton:new a({text:"Close",press:()=>s.close()})});d=new t({growing:true,growingScrollToLoad:true,noDataText:"No Audit history Found "});d.addColumn(new n({header:new r({text:"Name"})}));d.addColumn(new n({header:new r({text:"Email"})}));d.addColumn(new n({header:new r({text:"Phone"})}));d.addColumn(new n({header:new r({text:"Address"})}));d.addColumn(new n({header:new r({text:"Edited At"})}));u=new o({cells:[new r({text:"{customerName}"}),new r({text:"{email}"}),new r({text:"{phoneNumber}"}),new r({text:"{address}"}),new r({text:"{createdAtFormatted}"})]});s.addContent(d)}s.open()}}});
//# sourceMappingURL=History.js.map